# Design sidebar-directory-structure

## Requirements

- 将左侧边栏改造为目录树结构，提升空间利用率和导航体验
- 重新组织标签分类为层级目录结构：
  - **语言目录**：显示所有语言分类，点击可查看对应语言的单词
  - **时间线目录**：以树形结构显示年份 > 月份 > 日期，支持多级筛选
    - 年份节点（如 "2025"）
    - 月份节点（如 "2025-01"）  
    - 日期节点（如 "2025-01-15"）
  - **自定义标签**：显示用户创建的自定义标签
- 支持目录的展开/折叠功能
- 保持现有的单词筛选功能
- 改善视觉层次，让侧边栏更加充实和有用

## Solution

1. **重新设计 TagSidebar 组件结构**：
   - 实现可折叠的目录树结构
   - 添加展开/折叠状态管理
   - 使用层级缩进来表示目录关系

2. **语言目录实现**：
   - 从 tags 中筛选出 `auto_language` 类型的标签
   - 显示为一级目录项，点击筛选对应语言的单词
   - 添加语言图标和计数显示

3. **时间线目录实现**：
   - 从 `auto_date` 标签中构建树形结构：
     - 年份作为一级节点（如 "2025"）
     - 月份作为二级节点（如 "01月"） 
     - 日期作为三级节点（如 "15日"）
   - 支持任意层级的筛选（点击年份看整年，点击月份看整月，点击日期看当天）
   - 实现折叠/展开功能

4. **自定义标签目录**：
   - 显示 `custom` 类型的标签
   - 扁平化展示，无层级结构

5. **状态管理增强**：
   - 在 vocab-store 中添加目录展开状态管理
   - 添加 `expandedNodes` 状态来跟踪哪些目录节点是展开的
   - 保持当前选中标签的高亮显示

6. **UI/UX 改进**：
   - 使用 ChevronRight/ChevronDown 图标表示可展开节点
   - 添加层级缩进（每级增加 16px 左边距）
   - 保持现有的动画效果和主题样式
   - 添加加载状态和空状态处理

7. **数据处理逻辑**：
   - 创建 `buildTimelineTree` 函数来构建时间线树形数据
   - 创建 `parseTimeTag` 函数来解析时间标签（年、年-月、年-月-日）
   - 优化标签统计逻辑，支持层级统计

## Tests

- **目录树功能测试**：
  - 时间线目录能正确展开/折叠年份和月份节点
  - 点击不同层级的时间节点能正确筛选单词
  - 语言目录点击能正确筛选对应语言单词
  - 自定义标签点击能正确筛选

- **UI交互测试**：
  - 展开/折叠动画正常播放
  - 层级缩进正确显示
  - 选中状态正确高亮显示
  - 计数信息正确显示

- **状态管理测试**：
  - 目录展开状态在筛选操作后保持不变
  - 多个目录可以同时展开
  - 刷新后目录状态能够恢复

- **性能测试**：
  - 大量标签数据下目录渲染性能良好
  - 树形数据构建效率满足要求